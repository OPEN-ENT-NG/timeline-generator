<h1><i18n ng-click="openMainPage()">timelinegenerator.title</i18n></h1>

<div class="items">
	<div class="twelve cell">
		<button ng-click="newTimeline()"><i18n>timelinegenerator.timeline.new</i18n></button>
		<i class="open-right right-magnet big-hidden" ng-click="template.close('main')"></i>
	</div>
	<hr />
	<div class="row" ng-repeat="tl in timelines.all" ng-click="openTimeline(tl)" ng-class="{ selected: tl._id === timeline._id }">
		<div class="cell">
			<img skin-src="/img/illustrations/forum-default.png" ng-if="(tl.icon === undefined)" class="cell" />
			<img ng-src="[[tl.icon]]?thumbnail=120x120" ng-if="tl.icon !== undefined" class="cell" />
		</div>
		<article>
			<h1>[[tl.headline]]</h1>
			<div class="bottom-locked">
				<behaviour name="manage" resource="tl">
					<input type="checkbox" ng-model="tl.showButtons" ng-change="hideAlmostAllButtons(tl)"/>
				</behaviour>
			</div>
			<div class="small-hidden buttons" ng-class="{ hidden: !tl.showButtons || tl._id !== timeline._id }">
				<behaviour name="manage" resource="tl">
					<button ng-click="editTimeline(tl, $event)"><i18n>edit</i18n></button>
					<button ng-click="confirmRemoveTimeline(tl, $event)"><i18n>remove</i18n></button>
					<button ng-click="shareTimeline(tl, $event)"><i18n>share</i18n></button>
				</behaviour>
			</div>
		</article>
	</div>
</div>

<!-- Lightbox : Thread share -->
<div ng-if="display.showPanel">
	<lightbox show="display.showPanel" on-close="display.showPanel = false;">
		<share-panel app-prefix="'timelinegenerator'" resources="timeline"></share-panel>
	</lightbox>
</div>


<div ng-if="display.confirmDeleteTimelines">
	<lightbox show="display.confirmDeleteTimelines" on-close="cancelRemoveTimelines()">
		<div class="row" ng-if="timelines.selection().length === 1">
			<i18n>timelinegenerator.confirm.delete.timeline</i18n>
		</div>
		<div class="row" ng-if="timelines.selection().length > 1">
			<i18n>timelinegenerator.confirm.delete.timelines</i18n>
		</div>
		<div class="row">
			<button class="right-magnet" ng-click="removeSelectedTimelines()"><i18n>remove</i18n></button>
			<input type="button" class="cancel right-magnet" i18n-value="cancel" ng-click="cancelRemoveTimelines()" />
		</div>
	</lightbox>
</div>
