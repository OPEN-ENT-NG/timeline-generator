<div class="twelve cell">
	<div>
		<div class="cell">
			<behaviour name="contrib" resource="timeline" class="contextual-buttons row">
				<button ng-click="newEvent()"><i18n>timelinegenerator.event.new</i18n></button>
			</behaviour>
		</div>
		<div class="cell">
			<button ng-click="openTimelineViewer(timeline)"><i18n>timelinegenerator.timeline.view</i18n></button>
		</div>
	</div>
	
	<div class="row vertical-spacing"></div>
	<table class="twelve list-view">
		<thead>
			<tr>
				<th></th>
				<th>EvÃ¨nement</th>
				<th>Date de dÃ©but</th>
				<th>Date de fin</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="event in events.all" ng-class="{ checked: event.selected }">
				<td>
					<behaviour name="contrib" resource="timeline">
						<input type="checkbox" ng-model="event.selected" />
					</behaviour>
				</td>
					<td ng-if="timeline.myRights.contrib" ng-click="editEvent(event, $event)">
						<a>[[event.headline]]</a>
					</td>
					<td ng-if="!timeline.myRights.contrib">
						[[event.headline]]
					</td>

					<td ng-if="timeline.myRights.contrib" ng-click="editEvent(event, $event)">
						<a>[[event.startDate | date:'dd/MM/yyyy']]</a>
					</td>
					<td ng-if="!timeline.myRights.contrib">
						[[event.startDate | date:'dd/MM/yyyy']]
					</td>

					<td ng-if="timeline.myRights.contrib" ng-click="editEvent(event, $event)">
						<a>[[event.endDate | date:'dd/MM/yyyy']]</a>
					</td>
					<td ng-if="!timeline.myRights.contrib">
						[[event.endDate | date:'dd/MM/yyyy']]
					</td>
			</tr>
		</tbody>

	</table>
	<div ng-if="events.all.length === 0">
		<i18n>timelinegenerator.no.event.created.in.timeline</i18n>
	</div>
</div>

<behaviour name="contrib" resource="timeline" class="cell">
	<section class="toggle-buttons" ng-class="{ hide: events.selection().length === 0 }">
		<div class="toggle">
			<div class="row">
				<button ng-click="confirmRemoveSelectedEvents()"><i18n>remove</i18n></button>
			</div>
		</div>
	</section>
</behaviour>

<div ng-if="display.confirmDeleteEvents">
	<lightbox show="display.confirmDeleteEvents" on-close="cancelRemoveEvents()">
		<div class="row" ng-if="events.selection().length === 1">
			<i18n>timelinegenerator.confirm.delete.event</i18n>
		</div>
		<div class="row" ng-if="events.selection().length > 1">
			<i18n>timelinegenerator.confirm.delete.events</i18n>
		</div>
		<div class="row">
			<button class="right-magnet" ng-click="removeSelectedEvents()"><i18n>remove</i18n></button>
			<input type="button" class="cancel right-magnet" i18n-value="cancel" ng-click="cancelRemoveSubjects()" />
		</div>
	</lightbox>
</div>
